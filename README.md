# DOM Whiteboard Library

**DOMベースの軽量・ヘッドレス ホワイトボードライブラリ**

tldrawのアーキテクチャを参考に、DOMベースで高性能なホワイトボード機能を提供するヘッドレスライブラリです。UIコンポーネントを含まず、開発者が自由にインターフェースを構築できます。

## ✨ 特徴

- **🎯 ヘッドレス設計**: UIを含まず、ロジックのみを提供
- **⚡️ 高性能**: CSS Transform + DOM最適化による高速描画
- **🔧 柔軟性**: 自由なスタイリングとカスタマイズが可能
- **📦 軽量**: 必要最小限の依存関係
- **🎨 豊富な機能**: 描画、選択、移動、拡大縮小をサポート

## 🎨 フェーズ0 機能 (MVP)

現在開発中のコア機能:

### ✅ ビュー機能
- [x] DOMベースキャンバス表示
- [x] 背景グリッド
- [x] ズーム機能 (マウスホイール)
- [x] パン機能 (ドラッグでの画面移動)

### ✅ 操作機能  
- [x] シェイプの選択 (クリック)
- [x] 選択シェイプの移動 (ドラッグ)

### ✅ 状態管理
- [x] 最小限の状態管理システム
- [x] 座標変換 (ワールド ↔ スクリーン)

## 🚀 クイックスタート

### インストール

```bash
# パッケージマネージャーはYarnを使用
yarn install
```

### 開発環境の起動

```bash
# 開発サーバーを起動
yarn dev

# テストを実行
yarn test

# ビルド
yarn build
```

### 基本的な使用方法

```typescript
import { WhiteboardEngine } from 'dom-wb-handson';

// エンジンを初期化
const engine = new WhiteboardEngine({
  container: document.getElementById('canvas-container')!,
});

// シェイプを追加
engine.addShape({
  type: 'rectangle',
  x: 100,
  y: 100,
  width: 200,
  height: 150,
});

// 状態を監視
engine.onStateChange((state) => {
  console.log('State updated:', state);
});
```

## 🏗️ アーキテクチャ

### 技術スタック

- **TypeScript**: 型安全性とコード品質
- **Vite**: 高速開発サーバーとバンドル
- **Zustand**: 軽量状態管理
- **Vitest**: テストフレームワーク

### 主要コンポーネント

```
┌─────────────────────────────────────────────────┐
│                ユーザーアプリ                      │
│              (UI + スタイリング)                   │
└─────────────────┬───────────────────────────────┘
                  │
┌─────────────────▼───────────────────────────────┐
│              ホワイトボードAPI                     │
│            (ヘッドレスライブラリ)                   │
├─────────────────────────────────────────────────┤
│  ツールシステム  │  状態管理   │   描画エンジン     │
│  (選択/移動/描画) │ (Zustand)  │ (DOM + CSS Transform)│
└─────────────────────────────────────────────────┘
```

## 📚 開発ロードマップ

### フェーズ0: MVP完成 (進行中)
- ✅ プロジェクトセットアップ
- ✅ 基本キャンバス + ズーム/パン
- ✅ シェイプ選択・移動
- 🔄 座標変換最適化

### フェーズ1: 基本描画機能
- 📋 長方形・楕円・直線の描画
- 📋 シェイプのリサイズ
- 📋 Undo/Redoシステム

### フェーズ2: 高度な機能  
- 📋 フリーハンド描画
- 📋 テキスト編集
- 📋 複数選択
- 📋 データ保存/読込

## 🛠️ 開発に参加する

### 環境構築

```bash
# リポジトリをクローン
git clone [repository-url]
cd dom-wb-handson

# 依存関係をインストール
yarn install

# 開発サーバーを起動
yarn dev
```

### プロジェクト構造

```
dom-wb-handson/
├── src/
│   ├── core/           # コアエンジン
│   ├── tools/          # ツールシステム
│   ├── types/          # 型定義
│   └── utils/          # ユーティリティ
├── examples/           # サンプルアプリケーション  
├── docs/              # ドキュメント
└── tests/             # テストスイート
```

### コミット規約

```bash
# Gitmojiを使用したコミットメッセージ
✨ feat: 新機能追加
🐛 fix: バグ修正  
♻️ refactor: リファクタリング
🎨 style: フォーマット改善
⚡️ perf: パフォーマンス改善
✅ test: テスト追加・修正
📝 docs: ドキュメント更新
```

## 📖 詳細情報

- [📋 開発計画書](./PLAN.md): 詳細な設計思想と実装計画
- [🏗️ アーキテクチャ](./docs/architecture/): システム設計の詳細
- [🔧 API仕様](./docs/api/): ライブラリのAPI詳細
- [👨‍💻 開発ガイド](./docs/development/): 開発者向けガイドライン

## 📄 ライセンス

ISC License

---

**tldrawに敬意を表して** - このライブラリはtldrawの優れたアーキテクチャ設計から多くのインスピレーションを得ています。